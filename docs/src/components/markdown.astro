---
import { asHtml } from "@/lib/as-html";
import type { HTMLAttributes } from "astro/types";

type Props = HTMLAttributes<"article"> & {
  readonly markdown?: string;
};

const { markdown, ["class"]: class_ = "", ...props } = Astro.props;
---

<article
  class:list={[
    "prose prose-slate dark:prose-invert prose-code:text-primary prose-code:before:content-none prose-code:after:content-none",
    class_,
  ]}
  set:html={markdown === undefined ? undefined : asHtml(markdown)}
  {...props}
>
  {
    // Only use the slot if we haven't already set the inner HTML via `set:html`
    markdown === undefined ? <slot /> : undefined
  }
</article>
