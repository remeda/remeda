---
import { buttonVariants } from "@/components/ui/button";
import { getAllMappedLibraries } from "@/lib/mapping/libraries";
import { GitHubLogoIcon } from "@radix-ui/react-icons";
import DocsPageNav from "./docs-page-nav.astro";
import { MigrationSelectorIsland } from "./migration-selector-island";
import NavLink from "./nav-link.astro";
import { Search } from "./search";
import { ThemeSwitcher } from "./theme-switcher";

const libraries = await getAllMappedLibraries();
---

<header
  class="sticky top-0 z-50 flex h-16 flex-none items-center bg-background/95 px-3 shadow backdrop-blur supports-[backdrop-filter]:bg-background/60 sm:px-8"
>
  <nav
    class="flex flex-1 items-center gap-3 overflow-hidden text-xs sm:gap-8 sm:text-base"
  >
    <a href="/" class="font-bold">Remeda</a>
    <NavLink href="/docs" additionalHrefs={["/v1"]}>Documentation</NavLink>
    <MigrationSelectorIsland libraries={libraries} client:load>
      <NavLink directory as="span" href="/migrate">Migration Guides</NavLink>
    </MigrationSelectorIsland>
    <div class="flex-1"></div>
    <Search client:only="react" />
    <a
      href="https://github.com/remeda/remeda"
      target="_blank"
      class={buttonVariants({ variant: "ghost", size: "icon" })}
    >
      <GitHubLogoIcon />
      <span class="sr-only">GitHub</span>
    </a>
  </nav>
  <ThemeSwitcher client:load />
  <DocsPageNav />
</header>
