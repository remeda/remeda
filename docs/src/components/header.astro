---
import { NAVBAR_ENTRIES } from "@/lib/navbar-categories";
import { NAVBAR_ENTRIES as V1_NAVBAR_ENTRIES } from "@/lib/v1/navbar-categories";
import { GitHubLogoIcon } from "@radix-ui/react-icons";
import { buttonVariants } from "@shadcn/button";
import { MobileNav } from "./mobile-nav";
import { ThemeSwitcher } from "./theme-switcher";
import { values } from "remeda";
import { VERSIONS } from "./version-selector";

const { pathname } = Astro.url;
const trimmed = pathname.replace(/\/$/, "");
---

<header
  class="z-50 flex h-14 flex-none items-center bg-background px-4 shadow-md"
>
  <nav class="flex flex-1 items-center gap-8 text-sm">
    <a href="/" class="font-bold"> Remeda </a>
    <div class="flex-1">
      <a
        href="/docs/"
        class:list={[
          "transition-colors hover:text-foreground/80",
          values(VERSIONS).some(({ path }) => path === trimmed)
            ? "font-semibold text-primary"
            : "text-foreground/60",
        ]}
      >
        Documentation
      </a>
    </div>
    <a
      href="https://github.com/remeda/remeda"
      target="_blank"
      class={buttonVariants({ variant: "ghost", size: "icon" })}
    >
      <GitHubLogoIcon />
      <span class="sr-only">GitHub</span>
    </a>
  </nav>
  <div class="-mr-2 ml-auto flex items-center gap-2">
    <ThemeSwitcher client:load />
    <MobileNav
      pathname={pathname}
      entries={pathname === VERSIONS.v1.path
        ? V1_NAVBAR_ENTRIES
        : NAVBAR_ENTRIES}
      client:media="(max-width: 767px)"
    />
  </div>
</header>
