---
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { getEntry } from "astro:content";
import { Badge } from "./ui/badge";
import Prose from "./prose.astro";

type Props = {
  readonly name: string;
  readonly library: string;
};

const { name, library } = Astro.props;

const entry = await getEntry("mapping", `${library}/${name}`);
const rendered = await entry?.render();
---

<Card id={name} className="scroll-mt-24">
  <CardHeader>
    <div class="flex items-center gap-2">
      <CardTitle className="flex-1 text-2xl">{name}</CardTitle>
      <Badge className="h-8">{entry?.data.category}</Badge>
    </div>
  </CardHeader>
  <CardContent className="grid gap-8">
    {
      entry?.data.remeda !== undefined && (
        <Prose>
          Use <a href={`/docs#${entry.data.remeda}`}>{entry.data.remeda}</a>
        </Prose>
      )
    }
    {
      rendered !== undefined && (
        <Prose class="empty:hidden">
          <rendered.Content />
        </Prose>
      )
    }
  </CardContent>
</Card>
